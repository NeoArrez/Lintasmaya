<?php $__env->startSection('title', '| Invoice'); ?>

<?php $__env->startSection('stylesheets'); ?>
<?php $__env->stopSection(); ?>

<?php $__env->startSection('content'); ?>
<div class="container">
	<div class="col-md-9">
<?php /* 		<?php echo e($icount); ?> */ ?>
		<?php echo Form::open(['method'=>'GET','url'=>'invoice','class'=>'navbar-form navbar-left','role'=>'search', 'name'=>'searchForm']); ?>

			
			 
			<div class="col-md-2" style="width:150px;" id='MonthInvc' name='MonthInvc'></div>
			<div class="col-md-2" style="width:110px;" id='YearInvc' name='YearInvc'></div>
			<div class="col-md-2">
    			<?php echo Form::Button('<span class="glyphicon glyphicon-search" aria-hidden="true"></span>', ['type'=> 'submit','class'=>'btn btn-primary']); ?>

			</div>
		<?php echo Form::close(); ?>

	</div>
	<div class="col-md-3">
		<?php echo Form::open(['route' => 'invoice.store']); ?>

		    <?php echo Form::submit ('Generate Invoice', ['class'=>'btn btn-success btn-lg btn-block','style'=>'margin-top:10px;']); ?>

		<?php echo Form::close(); ?>

	</div>
	<div class="row">

		<div class="col-md-10">
			<h1>Data Invoice</h1>
<?php /* 			<?php echo e($ocount); ?>

			<?php echo e($icount); ?>

			<?php echo e($acount); ?> */ ?>

		</div>
		<div class="col-md-12">
			<hr>
		</div>
	</div>

	<div class="row">

		<table class="table table-striped">
		  	<thead>
		  		<th class="">No</th>
		  		<th class="">No Invoice</th>
<?php /* 		  		<th class="">Tgl Invoice</th>
		  		<th class="">Jatuh Tempo</th> */ ?>
		  		<th class="">ID</th>
		  		<th class="">Nama Pelanggan</th>
		  		<th class="">Paket</th>
		  		<th class="">Periode</th>
		  		<th class="">Jumlah</th>
		  		<th class="">Potongan</th>
		  		<th class="">PPN</th>
		  		<th class="">Total</th>
		  		<th class="">Status</th>
		  		<th class="">Tgl Bayar</th>
		  		<th class=""></th>
		  	</thead>
		  	<tbody id="InvcData">
		  		<?php foreach($invoices as $key => $invoice): ?>
		  			<tr>
		  				<th scope="row"><?php echo e(++$key); ?></th>
		  				<td><?php echo e($invoice->NoInvoice); ?></td>
<?php /* 		  				<th><?php echo e($invoice->TglInvoice); ?></td>
		  				<td><?php echo e($invoice->TglJatuhTempo); ?></td> */ ?>
		  				<td id="naper"><?php echo e($invoice->IDPerusahaan); ?></td>
		  				<td><?php echo e($invoice->NamaPerusahaan); ?></td>
		  				<td><?php echo e($invoice->Paket); ?></td>
		  				<td><?php echo e($invoice->Periode); ?></td>
		  				<td style="text-align:right;"><?php echo e(number_format($invoice->Bulanan, 0, ',', '.')); ?></td>
		  				<td style="text-align:right;"><?php echo e(number_format($invoice->Potongan, 0, ',', '.')); ?></td>
		  				<td style="text-align:right;"><?php echo e(number_format($invoice->PPN, 0, ',', '.')); ?></td>
		  				<td style="text-align:right;"><?php echo e(number_format($invoice->Total, 0, ',', '.')); ?></td>
		  				<td id="StatusBayar"><?php echo e($invoice->Status); ?></td>
		  				<td><?php echo e($invoice->TglBayar); ?></td>
		  				<td>
		  					<a href="<?php echo e(route('invoice.edit',$invoice->id)); ?>" class="btn btn-success btn-sm">
		  						<span class="glyphicon glyphicon-edit" aria-hidden="true"></span>
		  					</a>

		  					<a href="<?php echo e(route('invoice.show',$invoice->id)); ?>" target ="_blank" class="btn btn-primary btn-sm">
		  						<span class="glyphicon glyphicon-search" aria-hidden="true"></span>
		  					</a>

		  					<div class="btn btn-sm btndel">
			  					<?php echo Form::Open(['route' => ['invoice.destroy', $invoice->id], 'method' => 'DELETE']); ?>


					    			<?php echo Form::Button('<span class="glyphicon glyphicon-trash" aria-hidden="true"></span>', ['type'=> 'submit','class'=>'btn btn-warning btn-sm']); ?>


			  					<?php echo Form::Close(); ?>

		  					</div>
		  					<?php if($invoice->TglBayar == "0000-00-00"): ?>
			  					<a href="<?php echo e(route('invoice.bayar',$invoice->id)); ?>" class="btn btn-primary btn-block">
			  						<span class="glyphicon glyphicon-usd" aria-hidden="true"></span>
			  					</a>
		  					<?php endif; ?>
		  				</td>
		  			</tr>
		  		<?php endforeach; ?>
	  				<th scope="row">Total</th>
	  				<th></th>
<?php /* 		  				<th><?php echo e($invoice->TglInvoice); ?></th>
	  				<th><?php echo e($invoice->TglJatuhTempo); ?></th> */ ?>
	  				<th></th>
	  				<th></th>
	  				<th></th>
	  				<th></th>
	  				<th style="text-align:right;"><?php echo e(number_format($TBulanan, 0, ',', '.')); ?></th>
	  				<th style="text-align:right;"><?php echo e(number_format($TPotongan, 0, ',', '.')); ?></th>
	  				<th style="text-align:right;"><?php echo e(number_format($TPPN, 0, ',', '.')); ?></th>
	  				<th style="text-align:right;"><?php echo e(number_format($TTotal, 0, ',', '.')); ?></th>
	  				<th></th>
	  				<th></th>
	  				<th></td>
		  	</tbody>
		</table>
		  	
		<div class="text-center">
			<?php echo $invoices->render();; ?>

		</div>
		<table width="15%" border="0" cellspacing="0" cellpadding="0">
		  <tbody><tr>
		    <th>Keterangan</th>
		    <th align="right">&nbsp;</th>
		  </tr>
		  <tr>
		    <td>Invoice Lunas</td>
		    <td align="right"><?php echo e(number_format($TLunas, 0, ',', '.')); ?></td>
		  </tr>
		  <tr>
		    <td>Invoice Belum Lunas</td>
		    <td align="right"><?php echo e(number_format($TBelum, 0, ',', '.')); ?></td>
		  </tr>
		  <tr>
		    <td>Total Invoice</td>
		    <td align="right"><?php echo e(number_format($TTotal, 0, ',', '.')); ?></td>
		  </tr>
		    <tr>
		    <td>Total PPN</td>
		    <td align="right"><?php echo e(number_format($TPPN, 0, ',', '.')); ?></td>
		  </tr>
		</tbody></table>
	</div>
</div>
<?php $__env->stopSection(); ?>
<?php $__env->startSection('javascripts'); ?>
<script type="text/javascript">
	    var SelMonth = <?php echo json_encode($SelMonth); ?>;
	    var SelYear = <?php echo json_encode($SelYear); ?>;
</script>

<?php $__env->stopSection(); ?>
<?php echo $__env->make('app', array_except(get_defined_vars(), array('__data', '__path')))->render(); ?>